#define TraitNewObject(__class__) virtual bool callback(const int __id, CObject*& obj) { obj = NewObject(); return true; } virtual CObject* NewObject() { return new __class__; }